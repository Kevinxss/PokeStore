<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/pokemon/api/public/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de usuario</title>
</head>
<body>
    <header class="header">
        <div class="logo">POKESTORE</div>
        <nav class="nav">
            <ul>
                <li><a href="../public/menu.html">Inicio</a></li>
                <li><a href="../controllers/ver_favoritos.php">Favoritos</a></li>
                <li><a href="../controllers/ver_carrito.php">Carrito</a></li>
                <li><a href="../controllers/ver_compras.php">Compras</a></li>
                <li><a href="../public/agregar_saldo.html">Saldo</a></li>
                <li><a href="../public/administrar_usuario.html">Administrar</a></li>
                <li><a href="../controllers/cerrarSesion.php">Cerrar SesiÃ³n</a></li>
            </ul>
        </nav>
    </header>
    <section>
        <h2 class="bienvenida">Bienvenido, <?= htmlspecialchars($usuario['nombre']); ?></h2>
        <p>TelÃ©fono: <?= htmlspecialchars($usuario['telefono']); ?></p>
        <h3>Pokemones Favoritos</h3>
        
        <?php if (count($pokemones_favoritos) > 0): ?>
            <div class="contenedor">
                <?php foreach ($pokemones_favoritos as $poke): ?>
                    <div class="card">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/<?= htmlspecialchars($poke['id']); ?>.png" alt="<?= htmlspecialchars($poke['nombre']); ?>" >
                        <div class="card">
                            <strong><?= htmlspecialchars($poke['nombre']); ?></strong>
                            <?php if ($poke['tipo']): ?> - Tipo: <?= htmlspecialchars($poke['tipo']); ?><?php endif; ?>
                            <?php if ($poke['peso'] !== null): ?>
                                - Peso: <?= htmlspecialchars($poke['peso']); ?> kg
                                - Altura: <?= htmlspecialchars($poke['altura']); ?> m
                            <?php endif; ?>
                        </div>

                        <!-- BotÃ³n: Agregar Carrito -->
                        <form method="POST" action="../controllers/agregar_carrito.php">
                            <input type="hidden" name="id_pokemon" value="<?= htmlspecialchars($poke['id']); ?>">
                            <input type="hidden" name="nombre_pokemon" value="<?= htmlspecialchars($poke['nombre']); ?>">
                            <input type="hidden" name="sprite_url" value="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/<?= htmlspecialchars($poke['id']); ?>.png">
                            <label>Cantidad:</label>
                            <input type="number" name="cantidad" value="1" min="1"><br>
                            <button type="submit">ðŸ›’ Agregar al Carrito</button>
                        </form>

                        <!-- BotÃ³n: Comprar -->
                        <form method="POST" action="../controllers/comprar.php">
                            <input type="hidden" name="id_pokemon" value="<?= htmlspecialchars($poke['id']); ?>">
                            <input type="hidden" name="nombre" value="<?= htmlspecialchars($poke['nombre']); ?>">
                            <input type="hidden" name="altura" value="<?= htmlspecialchars($poke['altura']); ?>">
                            <input type="hidden" name="peso" value="<?= htmlspecialchars($poke['peso']); ?>">
                            <input type="hidden" name="precio" value="500"> <!-- precio ejemplo -->
                            <input type="hidden" name="tipo_principal" value="<?= htmlspecialchars($poke['tipo']); ?>">
                            <input type="hidden" name="imagen" value="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/<?= htmlspecialchars($poke['id']); ?>.png">
                            <button type="submit">ðŸ’° Comprar</button>
                        </form>
                    </div>
                <?php endforeach; ?>
            </div>
        <?php else: ?>
            <p>No tienes pokemones favoritos.</p>
        <?php endif; ?>
    </section>
</body>
</html>
